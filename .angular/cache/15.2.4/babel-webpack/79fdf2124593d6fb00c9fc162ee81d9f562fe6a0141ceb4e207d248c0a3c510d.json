{"ast":null,"code":"import { environments } from 'src/environments/enviroment';\nimport * as AWS from 'aws-sdk/global';\nimport * as S3 from 'aws-sdk/clients/s3';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../s3-service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/router\";\nfunction FileListComponent_button_11_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 11);\n    i0.ɵɵlistener(\"click\", function FileListComponent_button_11_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.back());\n    });\n    i0.ɵɵtext(1, \"Back\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction FileListComponent_div_17_ng_container_1_h5_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"h5\", 15);\n    i0.ɵɵelement(1, \"i\", 16);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementStart(3, \"span\", 17);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementStart(5, \"button\", 18);\n    i0.ɵɵlistener(\"click\", function FileListComponent_div_17_ng_container_1_h5_1_Template_button_click_5_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const content_r6 = i0.ɵɵnextContext().$implicit;\n      const ctx_r9 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r9.viewFile(content_r6.name));\n    });\n    i0.ɵɵtext(6, \"Download\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"button\", 19);\n    i0.ɵɵlistener(\"click\", function FileListComponent_div_17_ng_container_1_h5_1_Template_button_click_7_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const content_r6 = i0.ɵɵnextContext().$implicit;\n      const ctx_r12 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r12.deleteFile(content_r6.name));\n    });\n    i0.ɵɵtext(8, \"Delete\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const content_r6 = i0.ɵɵnextContext().$implicit;\n    const ctx_r7 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", content_r6.name.replace(ctx_r7.s3Service.currentFolder, \"\"), \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", content_r6.modifiedTime, \" \");\n  }\n}\nfunction FileListComponent_div_17_ng_container_1_h5_2_button_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r19 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 18);\n    i0.ɵɵlistener(\"click\", function FileListComponent_div_17_ng_container_1_h5_2_button_4_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r19);\n      const content_r6 = i0.ɵɵnextContext(2).$implicit;\n      const ctx_r17 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r17.openFolder(content_r6.name));\n    });\n    i0.ɵɵtext(1, \"View Files\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction FileListComponent_div_17_ng_container_1_h5_2_button_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r22 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 19);\n    i0.ɵɵlistener(\"click\", function FileListComponent_div_17_ng_container_1_h5_2_button_5_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r22);\n      const content_r6 = i0.ɵɵnextContext(2).$implicit;\n      const ctx_r20 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r20.deleteFolder(content_r6.name));\n    });\n    i0.ɵɵtext(1, \"Delete\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction FileListComponent_div_17_ng_container_1_h5_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h5\", 15);\n    i0.ɵɵelement(1, \"i\", 20);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementStart(3, \"span\", 17);\n    i0.ɵɵtemplate(4, FileListComponent_div_17_ng_container_1_h5_2_button_4_Template, 2, 0, \"button\", 21);\n    i0.ɵɵtemplate(5, FileListComponent_div_17_ng_container_1_h5_2_button_5_Template, 2, 0, \"button\", 22);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const content_r6 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", content_r6.name, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", content_r6.contentType == \"folder\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", content_r6.contentType == \"folder\");\n  }\n}\nfunction FileListComponent_div_17_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, FileListComponent_div_17_ng_container_1_h5_1_Template, 9, 2, \"h5\", 14);\n    i0.ɵɵtemplate(2, FileListComponent_div_17_ng_container_1_h5_2_Template, 6, 3, \"h5\", 14);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const content_r6 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", content_r6.contentType == \"file\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", content_r6.contentType == \"folder\");\n  }\n}\nfunction FileListComponent_div_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12);\n    i0.ɵɵtemplate(1, FileListComponent_div_17_ng_container_1_Template, 3, 2, \"ng-container\", 13);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.contentList);\n  }\n}\nfunction FileListComponent_div_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 23);\n    i0.ɵɵtext(1, \" No Content \");\n    i0.ɵɵelementEnd();\n  }\n}\nAWS.config.update({\n  accessKeyId: environments.aws.AWS_ACCESS_KEY_ID,\n  secretAccessKey: environments.aws.AWS_SECRET_ACCESS_KEY,\n  region: environments.aws.AWS_DEFAULT_REGION ////'ap-south-1'\n});\n\nvar s3 = new S3(AWS.config);\nexport let FileListComponent = /*#__PURE__*/(() => {\n  class FileListComponent {\n    constructor(s3Service) {\n      this.s3Service = s3Service;\n      this.contentList = [];\n    }\n    ngOnInit() {\n      this.openFolder(this.s3Service.currentFolder);\n    }\n    back() {\n      //---    Document/One/Two/\n      let thepath = \"FamilyDocuments/\" + this.s3Service.currentFolder;\n      let arr = thepath.split('/');\n      arr.splice(arr.length - 2, 1);\n      let folderName = arr.join('/');\n      this.openFolder(folderName);\n    }\n    openFolder(folder) {\n      this.s3Service.currentFolder = folder;\n      this.s3Service.getFolderContent().subscribe(m => {\n        this.contentList = m;\n      });\n    }\n    viewFile(key) {\n      this.s3Service.getUrl(key).subscribe(m => {\n        window.open(m, '_blank');\n      });\n    }\n    deleteFile(key) {\n      var params = {\n        Bucket: 'angular-upload-files-2023-2024',\n        Key: key\n      };\n      s3.deleteObject(params, function (err, data) {\n        if (err) console.log(err);else {\n          window.location.reload();\n        }\n      });\n    }\n    deleteFolder(key) {\n      let theKey = \"FamilyDocuments/\" + key;\n      var params = {\n        Bucket: 'angular-upload-files-2023-2024',\n        Key: theKey\n      };\n      s3.deleteObject(params, function (err, data) {\n        if (err) console.log(err);else {\n          window.location.reload();\n        }\n      });\n    }\n  }\n  FileListComponent.ɵfac = function FileListComponent_Factory(t) {\n    return new (t || FileListComponent)(i0.ɵɵdirectiveInject(i1.S3Service));\n  };\n  FileListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: FileListComponent,\n    selectors: [[\"app-file-list\"]],\n    decls: 19,\n    vars: 4,\n    consts: [[1, \"card\", \"bg-secondary\", \"text-white\"], [1, \"card-header\"], [1, \"card-body\"], [1, \"row\"], [1, \"col-sm-6\"], [1, \"col-sm-6\", \"text-end\"], [\"class\", \"btn btn-primary btn-sm\", 3, \"click\", 4, \"ngIf\"], [\"routerLink\", \"/new-folder\", 1, \"btn\", \"btn-primary\", \"btn-sm\", 2, \"margin-left\", \"5px\"], [\"routerLink\", \"/upload\", 1, \"btn\", \"btn-primary\", \"btn-sm\", 2, \"margin-left\", \"5px\"], [\"class\", \"list-group mt-2\", 4, \"ngIf\"], [\"class\", \"mt-2\", 4, \"ngIf\"], [1, \"btn\", \"btn-primary\", \"btn-sm\", 3, \"click\"], [1, \"list-group\", \"mt-2\"], [4, \"ngFor\", \"ngForOf\"], [\"class\", \"list-group-item list-group-item-action list-group-item-secondary\", 4, \"ngIf\"], [1, \"list-group-item\", \"list-group-item-action\", \"list-group-item-secondary\"], [1, \"fa\", \"fa-solid\", \"fa-file\"], [2, \"float\", \"right\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", \"btn-sm\", 3, \"click\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", \"btn-sm\", 2, \"margin-left\", \"2px\", 3, \"click\"], [1, \"fa\", \"fa-solid\", \"fa-folder\"], [\"class\", \"btn btn-primary btn-sm\", \"type\", \"submit\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"btn btn-primary btn-sm\", \"style\", \"margin-left: 2px;\", \"type\", \"submit\", 3, \"click\", 4, \"ngIf\"], [1, \"mt-2\"]],\n    template: function FileListComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1);\n        i0.ɵɵtext(2, \" My Family Documents \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"div\", 2)(4, \"div\", 3)(5, \"div\", 4)(6, \"label\");\n        i0.ɵɵtext(7, \"Current Folder : \");\n        i0.ɵɵelementStart(8, \"b\");\n        i0.ɵɵtext(9);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(10, \"div\", 5);\n        i0.ɵɵtemplate(11, FileListComponent_button_11_Template, 2, 0, \"button\", 6);\n        i0.ɵɵelementStart(12, \"button\", 7);\n        i0.ɵɵtext(13, \"Create Folder\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"button\", 8);\n        i0.ɵɵtext(15, \"Upload File\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelement(16, \"hr\");\n        i0.ɵɵtemplate(17, FileListComponent_div_17_Template, 2, 1, \"div\", 9);\n        i0.ɵɵtemplate(18, FileListComponent_div_18_Template, 2, 0, \"div\", 10);\n        i0.ɵɵelementEnd()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(9);\n        i0.ɵɵtextInterpolate(ctx.s3Service.currentFolder || \"/\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.s3Service.currentFolder != \"FamilyDocuments/\");\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngIf\", ctx.contentList.length > 0);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.contentList.length == 0);\n      }\n    },\n    dependencies: [i2.NgForOf, i2.NgIf, i3.RouterLink]\n  });\n  return FileListComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}